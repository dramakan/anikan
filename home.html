<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anikan - Complete Homepage</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /* --- 1. Global Styles & Deep Purple Theme --- */
        :root {
            --color-background: #100f14;
            --color-card: #1c1b22;
            --color-text: #e0e0e0;
            --color-text-muted: #a0a0a0;
            --color-primary: #9D4EDD; /* Vibrant Purple Accent */
            --color-primary-light: #c77dff;
            --border-color: #2c2c34;
            --font-family: 'Poppins', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { background-color: var(--color-background); color: var(--color-text); font-family: var(--font-family); overflow-x: hidden; }
        a { color: var(--color-text); text-decoration: none; transition: color 0.3s ease; }
        img { max-width: 100%; display: block; }
        
        /* --- 2. Header & Navigation --- */
        .main-header { position: fixed; top: 0; left: 0; width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 1.5rem 5%; z-index: 1000; background: linear-gradient(to bottom, rgba(16, 15, 20, 0.8), transparent); transition: background-color 0.3s ease; }
        .main-header.scrolled { background-color: var(--color-background); }
        .main-header .logo { font-size: 1.8rem; font-weight: 700; color: #fff; letter-spacing: 1px; flex-shrink: 0; }
        .main-header .logo span { color: var(--color-primary); }
        .main-nav { display: flex; gap: 2rem; }
        .main-nav a { font-weight: 500; position: relative; }
        .main-nav a::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px; background-color: var(--color-primary); transition: width 0.3s ease; }
        .main-nav a:hover::after, .main-nav a.active::after { width: 100%; }
        .main-nav a:hover, .main-nav a.active { color: var(--color-primary-light); }
        .header-actions { display: flex; align-items: center; gap: 1.5rem; }
        .search-bar { position: relative; }
        .search-bar input { background: var(--color-card); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 0.5rem 1rem 0.5rem 2.5rem; color: var(--color-text); width: 250px; transition: all 0.3s ease; }
        .search-bar input::placeholder { color: var(--color-text-muted); }
        .search-bar input:focus { width: 300px; outline: none; border-color: var(--color-primary); box-shadow: 0 0 10px rgba(157, 78, 221, 0.5); }
        .search-bar i { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--color-text-muted); }
        .cta-button { background: var(--color-primary); color: #fff; padding: 0.6rem 1.2rem; border-radius: 20px; font-weight: 600; transition: all 0.3s ease; flex-shrink: 0; }
        .cta-button:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(157, 78, 221, 0.5); background-color: var(--color-primary-light); }
        
        .search-results { position: absolute; top: 120%; left: 0; width: 300px; background: var(--color-card); border: 1px solid var(--border-color); border-radius: 8px; max-height: 400px; overflow-y: auto; display: none; z-index: 2000; }
        .search-result-item { display: flex; gap: 10px; padding: 8px; transition: background-color 0.2s; cursor: pointer; align-items: center; }
        .search-result-item img { width: 40px; height: 55px; object-fit: cover; border-radius: 4px; flex-shrink: 0; }
        .search-result-item:hover { background: var(--color-primary); color: #fff; }
        .no-result { padding: 10px; color: var(--color-text-muted); }

        /* --- 3. Spotlight / Hero Section --- */
        #spotlight { min-height: 100vh; position: relative; display: flex; align-items: center; padding: 0 5%; overflow: hidden; }
        .spotlight-background { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; }
        .spotlight-background img { width: 100%; height: 100%; object-fit: cover; transition: opacity 1s ease-in-out; }
        .spotlight-background::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(90deg, rgba(16, 15, 20, 1) 20%, rgba(16, 15, 20, 0.7) 50%, transparent 100%); }
        .spotlight-content { max-width: 50%; z-index: 2; }
        .spotlight-content .anime-title { font-size: 4rem; font-weight: 700; line-height: 1.1; color: #fff; }
        .spotlight-content .anime-meta { display: flex; align-items: center; flex-wrap: wrap; gap: 1.5rem; margin: 1rem 0; }
        .spotlight-content .rating { display: flex; align-items: center; gap: 0.5rem; color: var(--color-primary-light); font-weight: 600; }
        .spotlight-content .genres { color: var(--color-text-muted); }
        .spotlight-content .description { font-size: 1rem; line-height: 1.6; margin-bottom: 2rem; max-width: 600px; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
        .spotlight-buttons { display: flex; gap: 1rem; }
        .spotlight-buttons .btn { padding: 0.8rem 2rem; border-radius: 30px; font-size: 1rem; font-weight: 600; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 0.5rem; border: none; cursor: pointer; }
        .spotlight-buttons .btn-primary { background-color: var(--color-primary); color: #fff; }
        .spotlight-buttons .btn-secondary { background-color: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(255,255,255,0.2); }
        .spotlight-buttons .btn:hover { transform: translateY(-3px); }
        .carousel-controller { position: absolute; bottom: 5%; right: 5%; width: 45%; max-width: 800px; z-index: 2;}
        .carousel-track { display: flex; gap: 1rem; }
        .carousel-item { min-width: 180px; width: 180px; cursor: pointer; border-radius: 10px; overflow: hidden; border: 3px solid transparent; position: relative; transition: all 0.4s ease; }
        .carousel-item img { height: 250px; object-fit: cover; }
        .carousel-item::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); }
        .carousel-item-title { position: absolute; bottom: 10px; left: 10px; color: #fff; font-weight: 500; font-size: 0.9rem; z-index: 2; }
        .carousel-item.active { border-color: var(--color-primary); transform: scale(1.08); box-shadow: 0 0 20px rgba(157, 78, 221, 0.5); }
        
        .mobile-dots-nav {
            display: none;
            position: absolute;
            right: 2%;
            top: 50%;
            transform: translateY(-50%);
            flex-direction: column;
            gap: 10px;
            z-index: 3;
            padding: 5px;
            border-radius: 15px;
            background-color: rgba(0, 0, 0, 0.3);
        }
        .mobile-dots-nav .dot {
            width: 8px;
            height: 8px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }
        .mobile-dots-nav .dot.active {
            background-color: var(--color-primary-light);
            transform: scale(1.5);
        }

        /* --- 4. Content Carousel Sections --- */
        .content-section { padding: 3rem 5%; }
        .section-title { font-size: 1.8rem; font-weight: 600; margin-bottom: 1.5rem; display: inline-flex; align-items: center; gap: 0.75rem; }
        .section-title i { color: var(--color-primary); }
        .anime-carousel { display: flex; gap: 1.5rem; overflow-x: auto; padding-bottom: 1.5rem; scrollbar-width: none; }
        .anime-carousel::-webkit-scrollbar { display: none; }
        .anime-card { background: var(--color-card); border-radius: 10px; overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.3s ease; min-width: 200px; width: 200px; position: relative; }
        .anime-card:hover { transform: translateY(-10px); box-shadow: 0 10px 20px rgba(0,0,0,0.4), 0 0 20px rgba(157, 78, 221, 0.3); }
        .anime-card-img { width: 100%; height: 280px; object-fit: cover; }
        .anime-card-content { padding: 1rem; }
        .anime-card-title { font-size: 1rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: var(--color-text); }
        .anime-card-meta { font-size: 0.8rem; color: var(--color-text-muted); margin-top: 0.5rem; }
        .play-icon-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 280px; background: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; font-size: 3rem; color: #fff; opacity: 0; transition: opacity 0.3s ease; }
        .anime-card:hover .play-icon-overlay { opacity: 1; }
        
        /* --- 5. Footer --- */
        .main-footer { background-color: var(--color-card); padding: 3rem 5%; margin-top: 2rem; border-top: 2px solid var(--color-primary); }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; align-items: top; }
        .footer-about .logo { margin-bottom: 1rem; font-size: 1.8rem; font-weight: 700; color: #fff; letter-spacing: 1px; }
        .footer-about .logo span { color: var(--color-primary); }
        .footer-about p { color: var(--color-text-muted); line-height: 1.6; }
        .footer-heading { font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem; color: #fff; }
        .footer-links ul { list-style: none; }
        .footer-links ul li { margin-bottom: 0.75rem; }
        .footer-links ul a:hover { color: var(--color-primary-light); padding-left: 5px; }
        .social-links { display: flex; gap: 1rem; margin-top: 1rem; }
        .social-links a { font-size: 1.5rem; transition: transform 0.3s ease, color 0.3s ease; }
        .social-links a:hover { color: var(--color-primary-light); transform: scale(1.2); }
        .footer-bottom { text-align: center; margin-top: 3rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1); color: var(--color-text-muted); font-size: 0.9rem; }
        
        /* --- 6. Animations --- */
        .content-animate { animation: fadeInSlideUp 1s ease-out forwards; opacity: 0; }
        @keyframes fadeInSlideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* --- 7. Enhanced Responsive Design --- */
        @media (max-width: 1200px) {
            .spotlight-content { max-width: 60%; }
            #spotlight { flex-direction: column; justify-content: center; text-align: center; padding-top: 120px; min-height: auto; height: auto; }
            #spotlight .spotlight-buttons { justify-content: center; }
            .carousel-controller { width: 100%; position: relative; right: auto; bottom: auto; padding: 2rem 0; overflow-x: auto; }
        }
        @media (max-width: 992px) {
            .main-nav { display: none; }
            .spotlight-content .anime-title { font-size: 3rem; }
        }
        @media (max-width: 768px) {
            .spotlight-content { max-width: 100%; }
            .spotlight-content .anime-title { font-size: 2.5rem; }
            #spotlight { padding-top: 100px; justify-content: flex-end; padding-bottom: 3rem; min-height: 70vh; text-align: left; align-items: flex-start; }
            .spotlight-content .description { display: none; }
            #spotlight .spotlight-buttons { justify-content: flex-start; }
            .section-title { font-size: 1.5rem; }
            .anime-card { min-width: 160px; width: 160px; }
            .anime-card-img, .play-icon-overlay { height: 220px; }
            .carousel-controller { display: none; }
            
            .main-header {
                padding: 1rem 3%;
            }
            .header-actions {
                gap: 0.75rem;
            }
            .search-bar input {
                width: 140px; 
            }
            .search-bar input:focus {
                width: 200px;
            }
            .search-results {
                left: auto;
                right: 0;
                width: 200px;
            }
            .mobile-dots-nav {
                display: flex;
            }
        }
        @media (max-width: 480px) {
            :root { font-size: 14px; }
            .main-header, .content-section, #spotlight { padding-left: 3%; padding-right: 3%; }
            .spotlight-buttons .btn { padding: 0.7rem 1.5rem; font-size: 0.9rem;}

            .cta-button {
                padding: 0.5rem 0.8rem;
                font-size: 0.9rem;
            }
            .search-bar input {
                width: 120px;
            }
             .search-bar input:focus {
                width: 150px;
            }
             .search-results {
                width: 150px;
            }
        }
    </style>
</head>
<body>

    <header class="main-header">
        <a href="index.html" class="logo">Ani<span>kan</span></a>
        <nav class="main-nav"><a href="#" class="active">Home</a><a href="categories.html">Browse</a><a href="#trending-section">Trending</a><a href="movies.html">Movies</a><a href="https://dramakan.netlify.app/">Dramakan</a></nav>
        <div class="header-actions">
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input id="searchInput" type="text" placeholder="Search...">
                <div id="searchResults" class="search-results"></div>
            </div>
            <a href="#" class="cta-button">Sign In</a>
        </div>
    </header>

    <main>
        <section id="spotlight">
            <div class="spotlight-background"><img id="spotlight-bg-img" src="" alt="Featured Anime Background"></div>
            <div class="spotlight-content">
                <h1 class="anime-title" id="spotlight-title"></h1>
                <div class="anime-meta">
                    <div class="rating"><i class="fas fa-star"></i><span id="spotlight-rating"></span></div>
                    <div class="genres" id="spotlight-genres"></div>
                </div>
                <p class="description" id="spotlight-description"></p>
                <div class="spotlight-buttons">
                    <a id="spotlight-watch-btn" href="#" class="btn btn-primary"><i class="fas fa-play"></i> Watch Now</a>
                    <button class="btn btn-secondary"><i class="fas fa-plus"></i> Add to List</button>
                </div>
            </div>
            <div class="carousel-controller"><div class="carousel-track" id="carousel-track"></div></div>
            <div class="mobile-dots-nav" id="mobile-dots-nav"></div>
        </section>

        <section class="content-section" id="trending-section"><h2 class="section-title"><i class="fas fa-fire"></i> Trending Anime</h2><div class="anime-carousel" id="trending-carousel"></div></section>
        <section class="content-section" id="latest-section"><h2 class="section-title"><i class="fas fa-clock"></i> Latest Episodes</h2><div class="anime-carousel" id="latest-carousel"></div></section>
        <section class="content-section" id="schedule-section"><h2 class="section-title"><i class="fas fa-calendar-alt"></i> Airing Soon</h2><div class="anime-carousel" id="schedule-carousel"></div></section>
    </main>

    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-about">
                <a href="index.html" class="logo">Ani<span>kan</span></a>
                <p>Anikan is a free anime streaming website where you can watch your favorite anime online in high quality.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-telegram"></i></a><a href="#"><i class="fab fa-instagram"></i></a><a href="#"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            <div class="footer-links">
                <h3 class="footer-heading">Quick Links</h3>
                <ul><li><a href="home.html">Home</a></li><li><a href="categories.html">Browse</a></li><li><a href="#trending-section">Trending</a></li><li><a href="contact.html">Contact Us</a></li></ul>
            </div>
            <div class="footer-links">
                <h3 class="footer-heading">Legal</h3>
                <ul><li><a href="terms.html">Terms of Service</a></li><li><a href="privacy.html">Privacy Policy</a></li><li><a href="disclaimer.html">Disclaimer</a></li></ul>
            </div>
        </div>
        <div class="footer-bottom">&copy; 2025 Anikan. All rights reserved. This site does not store any files on its server.</div>
    </footer>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {

        // --- 1. DATA ---
        // MODIFICATION: Added pageUrl property to each anime object for manual linking.
        const animeData = [
            { id: 1, title: 'Gachiakuta', pageUrl: 'gachiakuta.html', type: 'TV Series', rating: 8.9, episodes: 24, genres: ['Action', 'Fantasy', 'Supernatural'], description: 'In a society where the wealthy discard their trash into a deep abyss...', coverImage: 'https://m.media-amazon.com/images/M/MV5BZDU5ZmEzODYtMDU2OS00NTZiLTk4MWYtYWUyZWUzNGU2ODdjXkEyXkFqcGc@._V1_.jpg', bgImage: 'https://4kwallpapers.com/images/wallpapers/gachiakuta-anime-2880x1800-22722.jpg', status: 'Upcoming', releaseYear: 2025, schedule: 'sun' },
            { id: 2, title: 'Lord of the Mysteries (LOTM)', pageUrl: 'Lotm.html', type: 'Donghua', rating: 9.2, episodes: 12, genres: ['Steampunk', 'Mystery', 'Supernatural'], description: 'After transmigrating into a Victorian-era world, Klein Moretti finds himself entangled with a secret organization...', coverImage: 'https://m.media-amazon.com/images/M/MV5BMWE1ZWYwZGUtZjRmOS00NzUzLTlkZmUtMTEwMjNhNTVmNDIwXkEyXkFqcGc@._V1_.jpg', bgImage: 'https://images.everyeye.it/img-notizie/lord-of-mysteries-anime-rivelazione-dell-estate-storia-animazioni-brividi-v3-817858-1280x720.webp', status: 'Upcoming', releaseYear: 2025, schedule: 'fri' },
            { id: 3, title: 'Demon Slayer: Infinity Castle Arc', pageUrl: 'Dicam.html', type: 'Movie', rating: 9.5, episodes: 1, genres: ['Action', 'Demons', 'Historical'], description: 'The final battle against Muzan Kibutsuji begins...', coverImage: 'https://upload.wikimedia.org/wikipedia/en/thumb/a/ae/Kimetsu_No_Yaiba_Mugen_Jyo-hen_theatrical_poster.jpg/250px-Kimetsu_No_Yaiba_Mugen_Jyo-hen_theatrical_poster.jpg', bgImage: 'https://static0.cbrimages.com/wordpress/wp-content/uploads/2025/05/demon-slayer-sets-unfortunate-gen-z-record-ahead-of-infinity-castle-anime-release.jpg', status: 'Upcoming Movie', releaseYear: 2025, isMovie: true },
            { id: 4, title: 'Dandadan S2', pageUrl: 'Dandadan.html', type: 'TV Series', rating: 8.8, episodes: 12, genres: ['Action', 'Comedy', 'Sci-Fi'], description: 'A high school girl who believes in ghosts and a boy who believes in aliens get dragged into a bizarre world...', coverImage: 'https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fea9c4d4e-a600-44a4-ba62-ee22643b01cf_3561x5035.jpeg', bgImage: 'https://static0.cbrimages.com/wordpress/wp-content/uploads/2025/06/c4ee60d3-5d74-4dc0-a663-1e56ad42e02f.jpeg', status: 'Airing', releaseYear: 2024, schedule: 'wed' },
            { id: 5, title: 'Chainsaw Man Movie: Reze Arc', pageUrl: 'ChainsawManMovie1.html', type: 'Movie', rating: 9.1, episodes: 1, genres: ['Action', 'Supernatural', 'Gore'], description: 'Denji falls for a seemingly perfect girl named Reze, who shares a mysterious connection with him...', coverImage: 'https://imgs.search.brave.com/PehZkdT-CmwQBU-tjhsmIVgjT_TdSOuDYtcNpxTFbCw/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9wb3N0/ZXIuZ3NjLmNvbS5t/eS8yMDI1LzI1MDQw/MV9DaGFpbnNhd01h/bi1UaGVNb3ZpZVJl/emVBcmNfYmlnLmpw/Zw', bgImage: 'https://static1.cbrimages.com/wordpress/wp-content/uploads/2023/12/chainsaw-man-movie-reze-arc-featured.jpg', status: 'Upcoming Movie', releaseYear: 2025, isMovie: true },
            { id: 6, title: 'Jujutsu Kaisen Season 3', pageUrl: 'Jujutsu-Kaisen-Season-3.html', type: 'TV Series', rating: 9.3, episodes: 24, genres: ['Action', 'Supernatural', 'School'], description: 'The Culling Game arc begins. Yuji Itadori and his allies must participate in a deadly ritual...', coverImage: 'https://cdn.shopify.com/s/files/1/0689/6061/6685/files/20250901_jjkS3_poster.jpg?v=1756708446', bgImage: 'https://www.comingsoon.net/wp-content/uploads/sites/3/2023/12/Jujutsu-Kaisen-Culling-Game-Arc-Header.png', status: 'Airing', releaseYear: 2025, schedule: 'thu' },
            { id: 7, title: 'Frieren: Beyond Journey\'s End', pageUrl: 'Frieren-Beyond-Journeys-End.html', type: 'TV Series', rating: 9.4, episodes: 28, genres: ['Adventure', 'Fantasy', 'Slice of Life'], description: 'After defeating the Demon King, the elven mage Frieren outlives her heroic companions...', coverImage: 'https://m.media-amazon.com/images/M/MV5BZTI4ZGMxN2UtODlkYS00MTBjLWE1YzctYzc3NDViMGI0ZmJmXkEyXkFqcGc@._V1_.jpg', bgImage: 'https://images.alphacoders.com/133/1332981.jpeg', status: 'Finished', releaseYear: 2024, schedule: 'sat' },
            { id: 8, title: 'Solo Leveling', pageUrl: 'Solo-Leveling.html', type: 'TV Series', rating: 8.7, episodes: 12, genres: ['Action', 'Fantasy', 'Adventure'], description: 'In a world where hunters with magical abilities fight deadly monsters, Sung Jinwoo, the weakest hunter...', coverImage: 'https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx151807-m1gX3iwfIs39.jpg', bgImage: 'https://images.ctfassets.net/4cd45et68cgf/5wO1320i25V50k2YJahKSc/d3d1354366d3a54a2435520a06806584/SoloLeveling_KeyArt1_CR.jpg', status: 'Airing', releaseYear: 2024, schedule: 'sat' },
            { id: 9, title: 'Kaiju no 8', pageUrl: 'kaijuno8.html', type: 'TV Series', rating: 8.7, episodes: 24, genres: ['Action', 'Sci-Fi', 'Monster'], description: 'In a Japan plagued by monstrous creatures known as Kaiju, Kafka Hibino works a dead-end job cleaning up the aftermath of their battles.', coverImage: 'https://preview.redd.it/new-key-visual-for-kaiju-no-8-season-2-v0-44lqbwzloa4f1.jpeg?width=1080&crop=smart&auto=webp&s=31417111b133a42be02e19f8fddc3d1d0336433e', bgImage: 'https://static0.gamerantimages.com/wordpress/wp-content/uploads/2025/06/kaiju-no-8-season-2-key-visual-cropped.jpg', status: 'Airing', releaseYear: 2024, schedule: 'sat' },
            { id: 10, title: 'Solo Leveling', pageUrl: 'Solo-Leveling.html', type: 'TV Series', rating: 8.7, episodes: 12, genres: ['Action', 'Fantasy', 'Adventure'], description: 'In a world where hunters with magical abilities fight deadly monsters, Sung Jinwoo...', coverImage: 'https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx151807-m1gX3iwfIs39.jpg', bgImage: 'https://images.ctfassets.net/4cd45et68cgf/5wO1320i25V50k2YJahKSc/d3d1354366d3a54a2435520a06806584/SoloLeveling_KeyArt1_CR.jpg', status: 'Airing', releaseYear: 2024, schedule: 'sat' },
            { id: 11, title: 'Solo Leveling', pageUrl: 'Solo-Leveling.html', type: 'TV Series', rating: 8.7, episodes: 12, genres: ['Action', 'Fantasy', 'Adventure'], description: 'In a world where hunters with magical abilities fight deadly monsters, Sung Jinwoo...', coverImage: 'https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx151807-m1gX3iwfIs39.jpg', bgImage: 'https://images.ctfassets.net/4cd45et68cgf/5wO1320i25V50k2YJahKSc/d3d1354366d3a54a2435520a06806584/SoloLeveling_KeyArt1_CR.jpg', status: 'Airing', releaseYear: 2024, schedule: 'sat' },
            { id: 12, title: 'Solo Leveling', pageUrl: 'Solo-Leveling.html', type: 'TV Series', rating: 8.7, episodes: 12, genres: ['Action', 'Fantasy', 'Adventure'], description: 'In a world where hunters with magical abilities fight deadly monsters, Sung Jinwoo...', coverImage: 'https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx151807-m1gX3iwfIs39.jpg', bgImage: 'https://images.ctfassets.net/4cd45et68cgf/5wO1320i25V50k2YJahKSc/d3d1354366d3a54a2435520a06806584/SoloLeveling_KeyArt1_CR.jpg', status: 'Airing', releaseYear: 2024, schedule: 'sat' },
            { id: 13, title: 'Solo Leveling', pageUrl: 'Solo-Leveling.html', type: 'TV Series', rating: 8.7, episodes: 12, genres: ['Action', 'Fantasy', 'Adventure'], description: 'In a world where hunters with magical abilities fight deadly monsters, Sung Jinwoo...', coverImage: 'https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx151807-m1gX3iwfIs39.jpg', bgImage: 'https://images.ctfassets.net/4cd45et68cgf/5wO1320i25V50k2YJahKSc/d3d1354366d3a54a2435520a06806584/SoloLeveling_KeyArt1_CR.jpg', status: 'Airing', releaseYear: 2024, schedule: 'sat' },
            { id: 14, title: 'Solo Leveling', pageUrl: 'Solo-Leveling.html', type: 'TV Series', rating: 8.7, episodes: 12, genres: ['Action', 'Fantasy', 'Adventure'], description: 'In a world where hunters with magical abilities fight deadly monsters, Sung Jinwoo...', coverImage: 'https://s4.anilist.co/file/anilistcdn/media/anime/cover/large/bx151807-m1gX3iwfIs39.jpg', bgImage: 'https://images.ctfassets.net/4cd45et68cgf/5wO1320i25V50k2YJahKSc/d3d1354366d3a54a2435520a06806584/SoloLeveling_KeyArt1_CR.jpg', status: 'Airing', releaseYear: 2024, schedule: 'sat' },
          ];
        
        // --- 2. DOM Elements ---
        const searchInput = document.getElementById('searchInput');
        const searchResultsContainer = document.getElementById('searchResults');
        const carouselTrack = document.getElementById('carousel-track');
        const spotlightBgImg = document.getElementById('spotlight-bg-img'), spotlightTitle = document.getElementById('spotlight-title'), spotlightRating = document.getElementById('spotlight-rating'), spotlightGenres = document.getElementById('spotlight-genres'), spotlightDescription = document.getElementById('spotlight-description');
        const spotlightWatchBtn = document.getElementById('spotlight-watch-btn');
        const spotlightContentElements = document.querySelectorAll('.spotlight-content > *');
        const mobileDotsNav = document.getElementById('mobile-dots-nav');

        // --- 3. Functions ---
        let currentSpotlightIndex = 0;
        const spotlightItems = animeData.slice(0, 5);

        function updateSpotlightSection(anime, index) {
            spotlightBgImg.style.opacity = '0';
            spotlightContentElements.forEach(el => el.classList.remove('content-animate'));
            setTimeout(() => {
                const isMobile = window.matchMedia("(max-width: 768px)").matches;
                spotlightBgImg.src = isMobile ? anime.coverImage : anime.bgImage;

                spotlightTitle.textContent = anime.title;
                spotlightRating.textContent = anime.rating;
                spotlightGenres.textContent = anime.genres.join(', ');
                spotlightDescription.textContent = anime.description;
                // MODIFICATION: Use the manual pageUrl from the database
                spotlightWatchBtn.href = anime.pageUrl;

                spotlightBgImg.style.opacity = '1';
                spotlightContentElements.forEach(el => { el.classList.remove('content-animate'); void el.offsetWidth; el.classList.add('content-animate'); });
                
                document.querySelectorAll('.carousel-item').forEach((item, idx) => {
                    item.classList.toggle('active', idx === index);
                });

                document.querySelectorAll('.mobile-dots-nav .dot').forEach((dot, idx) => {
                    dot.classList.toggle('active', idx === index);
                });

                currentSpotlightIndex = index;

            }, 500);
        }

        function populateSpotlightCarousel(items) {
            carouselTrack.innerHTML = '';
            mobileDotsNav.innerHTML = '';

            items.forEach((anime, index) => {
                const desktopItem = document.createElement('div');
                desktopItem.className = 'carousel-item';
                desktopItem.innerHTML = `<img src="${anime.coverImage}" alt="${anime.title}"><div class="carousel-item-title">${anime.title}</div>`;
                desktopItem.addEventListener('click', () => updateSpotlightSection(anime, index));
                carouselTrack.appendChild(desktopItem);

                const dot = document.createElement('div');
                dot.className = 'dot';
                dot.addEventListener('click', () => updateSpotlightSection(anime, index));
                mobileDotsNav.appendChild(dot);
            });
        }
        
        function createAnimeCard(anime) {
             // MODIFICATION: Use the manual pageUrl from the database
             return `<a href="${anime.pageUrl}" class="anime-card">
                <img src="${anime.coverImage}" alt="${anime.title}" class="anime-card-img">
                <div class="play-icon-overlay"><i class="fas fa-play"></i></div>
                <div class="anime-card-content">
                    <h3 class="anime-card-title">${anime.title}</h3>
                    <p class="anime-card-meta">${anime.type} &bull; ${anime.episodes} Episodes</p>
                </div>
            </a>`;
        }

        function populateContentCarousel(container, data) {
            container.innerHTML = data.map(createAnimeCard).join('');
        }
        
        function handleSearch() {
            const query = searchInput.value.toLowerCase().trim();
            if (!query) {
                searchResultsContainer.style.display = 'none'; return;
            }
            const matched = animeData.filter(d => d.title.toLowerCase().includes(query));
            searchResultsContainer.innerHTML = matched.length 
                // MODIFICATION: Use the manual pageUrl from the database
                ? matched.map(anime => `<a href="${anime.pageUrl}" class="search-result-item"><img src="${anime.coverImage}" alt="${anime.title}"><div><div>${anime.title}</div><small style="color: var(--text-muted-color);">${anime.type}</small></div></a>`).join('') 
                : '<div class="no-result">No results found</div>';
            searchResultsContainer.style.display = 'block';
        }

        // --- 4. Initial Setup ---
        populateSpotlightCarousel(spotlightItems);
        
        const trendingItems = [...animeData].sort((a,b) => b.rating - a.rating).slice(0, 10);
        populateContentCarousel(document.getElementById('trending-carousel'), trendingItems);
        
        const latestItems = animeData.filter(a => a.status === 'Airing' || a.status === 'Finished').slice(0, 10);
        populateContentCarousel(document.getElementById('latest-carousel'), latestItems);

        const scheduleItems = animeData.filter(a => a.schedule).slice(0,6);
        populateContentCarousel(document.getElementById('schedule-carousel'), scheduleItems);

        if (spotlightItems.length > 0) {
            updateSpotlightSection(spotlightItems[0], 0);
        }
        
        searchInput.addEventListener('input', handleSearch);
        document.addEventListener('click', (e) => {!e.target.closest('.search-bar') && (searchResultsContainer.style.display = 'none')});

        const mainHeader = document.querySelector('.main-header');
        window.addEventListener('scroll', () => {
            mainHeader.classList.toggle('scrolled', window.scrollY > 50);
        });

        let spotlightInterval;
        const autoAdvanceSpotlight = () => {
            clearInterval(spotlightInterval);
            if (window.matchMedia("(max-width: 768px)").matches) {
                spotlightInterval = setInterval(() => {
                    currentSpotlightIndex = (currentSpotlightIndex + 1) % spotlightItems.length;
                    updateSpotlightSection(spotlightItems[currentSpotlightIndex], currentSpotlightIndex);
                }, 5000);
            }
        };

        autoAdvanceSpotlight();
        window.addEventListener('resize', () => {
            autoAdvanceSpotlight();
            if (spotlightItems.length > 0) {
                updateSpotlightSection(spotlightItems[currentSpotlightIndex], currentSpotlightIndex);
            }
        });
    });
    </script>
    
</body>
</html>